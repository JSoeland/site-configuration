<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Trimark | True:Control</title>
  <link rel="shortcut icon" type="image/png" href="assets/images/logos/favicon.png" />
  <link rel="stylesheet" href="assets/css/styles.min.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>

<div id="snackbar">
		<div class="col-lg-1 left-right">
			<i class="ti ti-chevron-left"></i>
			<i class="ti ti-chevron-right"></i>
	  </div>
	  <div class="col-lg-9">
			<div class="row">
			<div class="col-lg-1"><div class="alarm-pill-high"> <i class="ti ti-alert-triangle"></i>High</div></div>
			<div class="col-lg-1">10:02 AM  </div>
			<div class="col-lg-1"> Inverter 1.A.2</div>
			 <div class="col-lg-9"><h5>Inverter Fault</h5>Inverter has reported the following fault: (Insulation impedance)</div>
			 </div>
	  </div>
	  <div class="col-lg-2 snackbar-cta">
	   <a href ="./alarms.html">Go to Alarms</a>
	  <button class="close-btn" onclick="closeSnackbar()">✖</button>
	  </div>
  </div>
  <!--  Body Wrapper -->
  <div class="page-wrapper" id="main-wrapper" data-layout="vertical" data-navbarbg="skin6" data-sidebartype="full"
    data-sidebar-position="fixed" data-header-position="fixed">


	<header class="app-header">
        <nav class="navbar navbar-expand-lg navbar-light">
          <ul class="navbar-nav">
            <li class="nav-item d-block d-xl-none">
              <a class="nav-link sidebartoggler nav-icon-hover" id="headerCollapse" href="javascript:void(0)">
                <i class="ti ti-menu-2"></i>
              </a>
            </li>
            <li class="site-title">
			 Phoenix Hyperion
            </li>
			   
          </ul>
		 
          <div class="navbar-collapse justify-content-end px-0" id="navbarNav">
            <ul class="navbar-nav flex-row ms-auto align-items-center justify-content-end">
               <li>
				<div class="weather">
					<ul>
					<li id="pst-time"></li>
					<li id="utc-time"></li>
					<li>82° F Sunny <i class="ti ti-sun"></i></li>
					</ul>
				</div>
				</li>
              <li class="nav-item dropdown">
                <a class="nav-link nav-icon-hover" href="javascript:void(0)" id="drop2" data-bs-toggle="dropdown"
                  aria-expanded="false">
                 <div class="avatar-initial">J</div>
                </a>
               
              </li>
            </ul>
          </div>
        </nav>
      </header>
	  
    <!-- Sidebar Start -->
    <aside class="left-sidebar">
      <!-- Sidebar scroll-->
      <div>
       <div class="notification-red">•</div>
        <!-- Sidebar navigation-->
        <nav class="sidebar-nav scroll-sidebar" data-simplebar="">
		  
		  <ul id="sidebarnav">
		            	<li class="sidebar-item">
              <a class="sidebar-link" href="./index.html" aria-expanded="false">
                <span>
                  <i class="ti ti-timeline-event"></i>
                </span>
                <span class="hide-menu">Site Status</span>
              </a>
            </li>
            <li class="sidebar-item">
              <a class="sidebar-link" href="./site-equipment.html" aria-expanded="false">
                <span>
                  <i class="ti ti-layout-dashboard"></i>
                </span>
                <span class="hide-menu">Site Equipment</span>
              </a>
            </li>
            <li class="sidebar-item">
              <a class="sidebar-link" href="./points.html" aria-expanded="false">
                <span>
                  <i class="ti ti-hierarchy-2"></i>
                </span>
                <span class="hide-menu">Points</span>
              </a>
            </li>
            <li class="sidebar-item">
              <a class="sidebar-link" href="./alarms.html" aria-expanded="false">
			  
                <span>
                  <i class="ti ti-alert-triangle"></i>
                </span>
                <span class="hide-menu">Alarms</span>
              </a>
            </li>
            <li class="sidebar-item">
              <a class="sidebar-link" href="./controls.html" aria-expanded="false">
                <span>
                  <i class="ti ti-adjustments"></i>
                </span>
                <span class="hide-menu">Controls</span>
              </a>
            </li>
            <!--
			<li class="sidebar-item active-page">
              <a class="sidebar-link" href="./trends.html" aria-expanded="false">
                <span>
                  <i class="ti ti-chart-line"></i>
                </span>
                <span class="hide-menu">Trends</span>
              </a>
            </li>
			-->
			<li class="sidebar-item">
              <a class="sidebar-link" href="./logs.html" aria-expanded="false">
                <span>
                  <i class="ti ti-list"></i>
                </span>
                <span class="hide-menu">Logs</span>
              </a>
            </li>
          </ul>
         
        </nav>
        <!-- End Sidebar navigation -->
      </div>
      <!-- End Sidebar scroll-->
    </aside>
    <!--  Sidebar End -->
	

    <!--  Main wrapper -->
    <div class="body-wrapper">
      
       <div class="container-fluid">
	   
	   <div class="row mb-3">
          <div class="col-lg-6">
			 <h3>Trends</h3>
            </div>
	  </div>
	  
	  
	    <div class="search-bar" style="margin-left:0">
	  <div class="row-begin">
	   <div class="pill active">Real-Time</div><div class="pill inactive">Yesterday</div><div class="pill inactive">Last 7 Days</div>
	  	    <!--	<label>
		   <div class="dd-button">Real-Time <i class="ti ti-chevron-down"></i></div>
			<input type="checkbox" class="dd-input" id="test">
			  <ul class="dd-menu">
			  	<li style="background:#ddd;">Real-Time</li>
			    <li>Yesterday</li>
				<li>Last 7 Days</li>
			  </ul>
		   </label>
		   -->
		</div>
	   <div class="row-end">
			<div class="right-settings"><i class="ti ti-edit"></i> </div>
			<div class="right-settings"><i class="ti ti-plus"></i> </div>
		   </div>
    </div>
           
		<div class="row">
          <div class="col-lg-9">
		   <div class="col-lg-12">
            <div class="card w-100">
              <div class="card-body">
                
				 <canvas id="energyChart"></canvas>
				 
              </div>
            </div>
          </div>
		  </div>
		
		  <div class="col-lg-3">
				
                  <div class="card trend">
                    <div class="card-body">
                      
					  <div class="row">
					  		  <div class="col-lg-6">
									<h5> <input type="text" id="tenMinutesAgoDate" readonly>
								</div>
								<div class="col-lg-6">
									<small><input type="text" id="tenMinutesAgoTime" readonly></small></h5>
								</div>
						</div>
							 <div class="row-legend align-items-center">
								<div class="col-lg-8">
									<div class="legend-data">
									<div class="icon-left"><i class="ti ti-circle yellow"></i></div><strong>Reactive Power - Ph 3  (POD)</strong><br><small>Main Meter</small>
									</div>
							    </div>
								<div class="col-lg-4">
									<div class="legend-data-detail">-0.4 <span>MVAR</span></div>
								</div>
							</div>
							 <div class="row-legend align-items-center">
								<div class="col-lg-8">
									<div class="legend-data">
									<div class="icon-left"><i class="ti ti-circle green"></i></div><strong>Real Power - Ph 3 (POD)</strong><br><small>Main Meter</small>
									</div>
							    </div>
								<div class="col-lg-4">
									<div class="legend-data-detail">-10 <span>MW</span></div>
								</div>
							</div>
							
                    </div>
					<!--
					<div class="card-footer">
								<div class="col-lg-6">
									<div class="legend-data">Total</div>
							    </div>
								<div class="col-lg-6">
									<div class="legend-data-detail">2260.1 Amps</div>
								</div>
							
                    </div>
					-->
                  </div>
           </div>
		   
				
				
        </div>
		
      </div>
    </div>
  </div>
  <script>
    const ctx = document.getElementById('energyChart').getContext('2d');

    const energyChart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: ['5:30 AM', '6:00 AM', '6:30 AM', '7:00 AM','7:30 AM', '8:00 AM', '8:30 AM', '9:00 AM', '9:30 AM', '10:00 AM', '10:30 AM', '11:00 AM', '11:30 AM', '12:00 PM'],
        datasets: [
          {
            label: 'Reactive Power - Ph 3 (POD)',
            data: [1, 4, 1, -1, 1, -3, 0.2, 1, -.2, .4, -.4, -2, -1.5, -2],
            type: 'line',
            borderColor: 'rgba(255, 191, 60, 1)',
			backgroundColor: 'rgba(0,0,0,1)',
            yAxisID: 'y1',
          },
		  {
            label: 'Real Power - Ph 3 (POD)',
            data: [43, 44, 20, 20, 0, 0, 0, -10, -10, -10, 0, -40, -24, 0],
            type: 'line',
            borderColor: 'rgba(122, 255, 191, 1)',
			backgroundColor: 'rgba(0,0,0,1)',
            yAxisID: 'y',
          }
        ]
      },
    options: {
  responsive: true,
  interaction: {
    mode: 'index',
    intersect: false,
  },
  stacked: false,
  plugins: {
    legend: {
        display: false
    },
    title: {
      display: false
    }
  },
  scales: {
    y: {
      type: 'linear',
      position: 'left',
      title: {
        display: true,
        text: 'Generation (MW)',
        color: 'white' // <-- Y-axis title color
      },
      ticks: {
        color: 'white' // <-- Y-axis tick labels
      },
      grid: {
        color: 'rgba(255,255,255,0.1)' // optional: lighter grid lines
      }
    },
    y1: {
      type: 'linear',
      position: 'right',
      title: {
        display: true,
        text: 'MVAR',
        color: 'white'
      },
      ticks: {
        color: 'white'
      },
      grid: {
        drawOnChartArea: false
      }
    },
    x: {
      ticks: {
        color: 'white' // <-- X-axis tick labels
      },
      grid: {
        color: 'rgba(255,255,255,0.1)'
      }
    }
  }
}

    });
  </script>
  
   <script>
    function pad(value) {
      return String(value).padStart(2, '0');
    }

    function updateTime() {
      const now = new Date();

      // UTC time (HH:MM:SS)
      const utcHours = pad(now.getUTCHours());
      const utcMinutes = pad(now.getUTCMinutes());
      const utcSeconds = pad(now.getUTCSeconds());
      document.getElementById('utc-time').textContent = `${utcHours}:${utcMinutes} UTC`;

      // PST time using Intl.DateTimeFormat
      const pstFormatter = new Intl.DateTimeFormat('en-US', {
        timeZone: 'America/Los_Angeles',
        hour: '2-digit',
        minute: '2-digit',
        hour12: true
      });
      const pstTime = pstFormatter.format(now);
      document.getElementById('pst-time').textContent = `${pstTime} PST`;
    }

    updateTime();
  </script>
  
  <script>
    function updateTimeFields() {
      const now = new Date();
      const tenMinAgo = new Date(now.getTime() - 10 * 60 * 1000);

      const pad = n => n.toString().padStart(2, '0');

      const formatDate = date => {
        return `${pad(date.getMonth() + 1)}/${pad(date.getDate())}/${date.getFullYear()}`;
      };

      const formatTime12Hour = date => {
        let hours = date.getHours();
        const minutes = pad(date.getMinutes());
        const seconds = pad(date.getSeconds());
        const ampm = hours >= 12 ? 'PM' : 'AM';
        hours = hours % 12;
        hours = hours ? hours : 12; // 0 becomes 12
        return `${pad(hours)}:${minutes} ${ampm} PST`;
      };

      const formatDateTime = date => {
        return `${formatDate(date)} ${formatTime12Hour(date)}`;
      };

      document.getElementById('tenMinutesAgoDate').value = formatDate(tenMinAgo);
      document.getElementById('tenMinutesAgoTime').value = formatTime12Hour(now);
    }

    updateTimeFields();
  </script>
  
  <script>
    function closeSnackbar() {
      document.getElementById("snackbar").style.display = "none";
    }
  </script>
  
</body>

</html>